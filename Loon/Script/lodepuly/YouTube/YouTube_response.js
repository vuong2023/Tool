/*
脚本引用https://raw.githubusercontent.com/dualsubs/youtube/main/js/youtube.response.js
*/
// build: 2024/5/12 21:31:47
(()=>{var _t=object.defineproperty;var qt=(t,e,n)=>e in t?_t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var k=(t,e,n)=>(qt(t,typeof e!="symbol"?e+"":e,n),n);(function(t){function e(){}function n(){}var r=string.fromcharcode,s={}.tostring,o=s.call(t.sharedarraybuffer),i=s(),a=t.uint8array,c=a||array,f=a?arraybuffer:c,m=f.isview||function(h){return h&&"length"in h},l=s.call(f.prototype);f=n.prototype;var g=t.textencoder,p=new(a?uint16array:c)(32);e.prototype.decode=function(h){if(!m(h)){var r=s.call(h);if(r!==l&&r!==o&&r!==i)throw typeerror("failed to execute 'decode' on 'textdecoder': the provided value is not of type '(arraybuffer or arraybufferview)'");h=a?new c(h):h||[]}for(var n=r="",y=0,t=h.length|0,j=t-32|0,x,w,f=0,j=0,o,b=0,c=-1;y<t;){for(x=y<=j?32:t-y|0;b<x;y=y+1|0,b=b+1|0){switch(w=h[y]&255,w>>4){case 15:if(o=h[y=y+1|0]&255,o>>6!==2||247<w){y=y-1|0;break}f=(w&7)<<6|o&63,j=5,w=256;case 14:o=h[y=y+1|0]&255,f<<=6,f|=(w&15)<<6|o&63,j=o>>6===2?j+4|0:24,w=w+256&768;case 13:case 12:o=h[y=y+1|0]&255,f<<=6,f|=(w&31)<<6|o&63,j=j+7|0,y<t&&o>>6===2&&f>>j&&1114112>f?(w=f,f=f-65536|0,0<=f&&(c=(f>>10)+55296|0,w=(f&1023)+56320|0,31>b?(p[b]=c,b=b+1|0,c=-1):(o=c,c=w,w=o))):(w>>=8,y=y-w-1|0,w=65533),f=j=0,x=y<=j?32:t-y|0;default:p[b]=w;continue;case 11:case 10:case 9:case 8:}p[b]=65533}if(n+=r(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18],p[19],p[20],p[21],p[22],p[23],p[24],p[25],p[26],p[27],p[28],p[29],p[30],p[31]),32>b&&(n=n.slice(0,b-32|0)),y<t){if(p[0]=c,b=~c>>>31,c=-1,n.length<r.length)continue}else c!==-1&&(n+=r(c));r+=n,n=""}return r},f.encode=function(h){h=h===void 0?"":""+h;var r=h.length|0,n=new c((r<<1)+8|0),y,t=0,j=!a;for(y=0;y<r;y=y+1|0,t=t+1|0){var x=h.charcodeat(y)|0;if(127>=x)n[t]=x;else{if(2047>=x)n[t]=192|x>>6;else{e:{if(55296<=x)if(56319>=x){var w=h.charcodeat(y=y+1|0)|0;if(56320<=w&&57343>=w){if(x=(x<<10)+w-56613888|0,65535<x){n[t]=240|x>>18,n[t=t+1|0]=128|x>>12&63,n[t=t+1|0]=128|x>>6&63,n[t=t+1|0]=128|x&63;continue}break e}x=65533}else 57343>=x&&(x=65533);!j&&y<<1<t&&y<<1<(t-7|0)&&(j=!0,w=new c(3*r),w.set(n),n=w)}n[t]=224|x>>12,n[t=t+1|0]=128|x>>6&63}n[t=t+1|0]=128|x&63}}return a?n.subarray(0,t):n.slice(0,t)},g||(t.textdecoder=e,t.textencoder=n)})(globalthis);function i(t,e){if(!t)throw new error(e)}var wt=34028234663852886e22,xt=-34028234663852886e22,yt=4294967295,jt=2147483647,kt=-2147483648;function _(t){if(typeof t!="number")throw new error("invalid int 32: "+typeof t);if(!number.isinteger(t)||t>jt||t<kt)throw new error("invalid int 32: "+t)}function z(t){if(typeof t!="number")throw new error("invalid uint 32: "+typeof t);if(!number.isinteger(t)||t>yt||t<0)throw new error("invalid uint 32: "+t)}function te(t){if(typeof t!="number")throw new error("invalid float 32: "+typeof t);if(number.isfinite(t)&&(t>wt||t<xt))throw new error("invalid float 32: "+t)}var we=symbol("@bufbuild/protobuf/enum-type");function xe(t){let e=t[we];return i(e,"missing enum type on enum object"),e}function ne(t,e,n,r){t[we]=se(e,n.map(s=>({no:s.no,name:s.name,localname:t[s.no]})),r)}function se(t,e,n){let r=object.create(null),s=object.create(null),o=[];for(let i of e){let a=je(i);o.push(a),r[i.name]=a,s[i.no]=a}return{typename:t,values:o,findname(i){return r[i]},findnumber(i){return s[i]}}}function ye(t,e,n){let r={};for(let s of e){let o=je(s);r[o.localname]=o.no,r[o.no]=o.localname}return ne(r,t,e,n),r}function je(t){return"localname"in t?t:object.assign(object.assign({},t),{localname:t.name})}var e=class{equals(e){return this.gettype().runtime.util.equals(this.gettype(),this,e)}clone(){return this.gettype().runtime.util.clone(this)}frombinary(e,n){let r=this.gettype(),s=r.runtime.bin,o=s.makereadoptions(n);return s.readmessage(this,o.readerfactory(e),e.bytelength,o),this}fromjson(e,n){let r=this.gettype(),s=r.runtime.json,o=s.makereadoptions(n);return s.readmessage(r,e,o,this),this}fromjsonstring(e,n){let r;try{r=json.parse(e)}catch(s){throw new error(`cannot decode ${this.gettype().typename} from json: ${s instanceof error?s.message:string(s)}`)}return this.fromjson(r,n)}tobinary(e){let n=this.gettype(),r=n.runtime.bin,s=r.makewriteoptions(e),o=s.writerfactory();return r.writemessage(this,o,s),o.finish()}tojson(e){let n=this.gettype(),r=n.runtime.json,s=r.makewriteoptions(e);return r.writemessage(this,s)}tojsonstring(e){var n;let r=this.tojson(e);return json.stringify(r,null,(n=e?.prettyspaces)!==null&&n!==void 0?n:0)}tojson(){return this.tojson({emitdefaultvalues:!0})}gettype(){return object.getprototypeof(this).constructor}};function ke(t,e,n,r){var s;let o=(s=r?.localname)!==null&&s!==void 0?s:e.substring(e.lastindexof(".")+1),i={[o]:function(a){t.util.initfields(this),t.util.initpartial(a,this)}}[o];return object.setprototypeof(i.prototype,new e),object.assign(i,{runtime:t,typename:e,fields:t.util.newfieldlist(n),frombinary(a,c){return new i().frombinary(a,c)},fromjson(a,c){return new i().fromjson(a,c)},fromjsonstring(a,c){return new i().fromjsonstring(a,c)},equals(a,c){return t.util.equals(i,a,c)}}),i}var u;(function(t){t[t.double=1]="double",t[t.float=2]="float",t[t.int64=3]="int64",t[t.uint64=4]="uint64",t[t.int32=5]="int32",t[t.fixed64=6]="fixed64",t[t.fixed32=7]="fixed32",t[t.bool=8]="bool",t[t.string=9]="string",t[t.bytes=12]="bytes",t[t.uint32=13]="uint32",t[t.sfixed32=15]="sfixed32",t[t.sfixed64=16]="sfixed64",t[t.sint32=17]="sint32",t[t.sint64=18]="sint64"})(u||(u={}));var m;(function(t){t[t.bigint=0]="bigint",t[t.string=1]="string"})(m||(m={}));function he(){let t=0,e=0;for(let r=0;r<28;r+=7){let s=this.buf[this.pos++];if(t|=(s&127)<<r,!(s&128))return this.assertbounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertbounds(),[t,e];for(let r=3;r<=31;r+=7){let s=this.buf[this.pos++];if(e|=(s&127)<<r,!(s&128))return this.assertbounds(),[t,e]}throw new error("invalid varint")}function re(t,e,n){for(let o=0;o<28;o=o+7){let i=t>>>o,a=!(!(i>>>7)&&e==0),c=(a?i|128:i)&255;if(n.push(c),!a)return}let r=t>>>28&15|(e&7)<<4,s=!!(e>>3);if(n.push((s?r|128:r)&255),!!s){for(let o=3;o<31;o=o+7){let i=e>>>o,a=!!(i>>>7),c=(a?i|128:i)&255;if(n.push(c),!a)return}n.push(e>>>31&1)}}var ne=4294967296;function ee(t){let e=t[0]==="-";e&&(t=t.slice(1));let n=1e6,r=0,s=0;function o(i,a){let c=number(t.slice(i,a));s*=n,r=r*n+c,r>=ne&&(s=s+(r/ne|0),r=r%ne)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?ze(r,s):re(r,s)}function qe(t,e){let n=re(t,e),r=n.hi&2147483648;r&&(n=ze(n.lo,n.hi));let s=fe(n.lo,n.hi);return r?"-"+s:s}function fe(t,e){if({lo:t,hi:e}=zt(t,e),e<=2097151)return string(ne*e+t);let n=t&16777215,r=(t>>>24|e<<8)&16777215,s=e>>16&65535,o=n+r*6777216+s*6710656,i=r+s*8147497,a=s*2,c=1e7;return o>=c&&(i+=math.floor(o/c),o%=c),i>=c&&(a+=math.floor(i/c),i%=c),a.tostring()+ze(i)+ze(o)}function zt(t,e){return{lo:t>>>0,hi:e>>>0}}function re(t,e){return{lo:t|0,hi:e|0}}function ze(t,e){return e=~e,t?t=~t+1:e+=1,re(t,e)}var ze=t=>{let e=string(t);return"0000000".slice(e.length)+e};function be(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function et(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertbounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertbounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertbounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertbounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new error("invalid varint");return this.assertbounds(),e>>>0}function ht(){let t=new dataview(new arraybuffer(8));if(typeof bigint=="function"&&typeof t.getbigint64=="function"&&typeof t.getbiguint64=="function"&&typeof t.setbigint64=="function"&&typeof t.setbiguint64=="function"&&(typeof process!="object"||typeof process.env!="object"||process.env.buf_bigint_disable!=="1")){let s=bigint("-9223372036854775808"),o=bigint("9223372036854775807"),i=bigint("0"),a=bigint("18446744073709551615");return{zero:bigint(0),supported:!0,parse(c){let f=typeof c=="bigint"?c:bigint(c);if(f>o||f<s)throw new error(`int64 invalid: ${c}`);return f},uparse(c){let f=typeof c=="bigint"?c:bigint(c);if(f>a||f<i)throw new error(`uint64 invalid: ${c}`);return f},enc(c){return t.setbigint64(0,this.parse(c),!0),{lo:t.getint32(0,!0),hi:t.getint32(4,!0)}},uenc(c){return t.setbigint64(0,this.uparse(c),!0),{lo:t.getint32(0,!0),hi:t.getint32(4,!0)}},dec(c,f){return t.setint32(0,c,!0),t.setint32(4,f,!0),t.getbigint64(0,!0)},udec(c,f){return t.setint32(0,c,!0),t.setint32(4,f,!0),t.getbiguint64(0,!0)}}}let n=s=>i(/^-?[0-9]+$/.test(s),`int64 invalid: ${s}`),r=s=>i(/^[0-9]+$/.test(s),`uint64 invalid: ${s}`);return{zero:"0",supported:!1,parse(s){return typeof s!="string"&&(s=s.tostring()),n(s),s},uparse(s){return typeof s!="string"&&(s=s.tostring()),r(s),s},enc(s){return typeof s!="string"&&(s=s.tostring()),n(s),ee(s)},uenc(s){return typeof s!="string"&&(s=s.tostring()),r(s),ee(s)},dec(s,o){return qe(s,o)},udec(s,o){return fe(s,o)}}}var s=ht();var k;(function(t){t[t.varint=0]="varint",t[t.bit64=1]="bit64",t[t.lengthdelimited=2]="lengthdelimited",t[t.startgroup=3]="startgroup",t[t.endgroup=4]="endgroup",t[t.bit32=5]="bit32"})(k||(k={}));var se=class{constructor(e){this.stack=[],this.textencoder=e??new textencoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new uint8array(this.buf));let e=0;for(let s=0;s<this.chunks.length;s++)e+=this.chunks[s].length;let n=new uint8array(e),r=0;for(let s=0;s<this.chunks.length;s++)n.set(this.chunks[s],r),r+=this.chunks[s].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.bytelength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new uint8array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(z(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return _(e),be(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.bytelength),this.raw(e)}string(e){let n=this.textencoder.encode(e);return this.uint32(n.bytelength),this.raw(n)}float(e){te(e);let n=new uint8array(4);return new dataview(n.buffer).setfloat32(0,e,!0),this.raw(n)}double(e){let n=new uint8array(8);return new dataview(n.buffer).setfloat64(0,e,!0),this.raw(n)}fixed32(e){z(e);let n=new uint8array(4);return new dataview(n.buffer).setuint32(0,e,!0),this.raw(n)}sfixed32(e){_(e);let n=new uint8array(4);return new dataview(n.buffer).setint32(0,e,!0),this.raw(n)}sint32(e){return _(e),e=(e<<1^e>>31)>>>0,be(e,this.buf),this}sfixed64(e){let n=new uint8array(8),r=new dataview(n.buffer),s=s.enc(e);return r.setint32(0,s.lo,!0),r.setint32(4,s.hi,!0),this.raw(n)}fixed64(e){let n=new uint8array(8),r=new dataview(n.buffer),s=s.uenc(e);return r.setint32(0,s.lo,!0),r.setint32(4,s.hi,!0),this.raw(n)}int64(e){let n=s.enc(e);return re(n.lo,n.hi,this.buf),this}sint64(e){let n=s.enc(e),r=n.hi>>31,s=n.lo<<1^r,o=(n.hi<<1|n.lo>>>31)^r;return re(s,o,this.buf),this}uint64(e){let n=s.uenc(e);return re(n.lo,n.hi,this.buf),this}},oe=class{constructor(e,n){this.varint64=he,this.uint32=et,this.buf=e,this.len=e.length,this.pos=0,this.view=new dataview(e.buffer,e.byteoffset,e.bytelength),this.textdecoder=n??new textdecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e){let n=this.pos;switch(e){case k.varint:for(;this.buf[this.pos++]&128;);break;case k.bit64:this.pos+=4;case k.bit32:this.pos+=4;break;case k.lengthdelimited:let r=this.uint32();this.pos+=r;break;case k.startgroup:let s;for(;(s=this.tag()[1])!==k.endgroup;)this.skip(s);break;default:throw new error("cant skip wire type "+e)}return this.assertbounds(),this.buf.subarray(n,this.pos)}assertbounds(){if(this.pos>this.len)throw new rangeerror("premature eof")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return s.dec(...this.varint64())}uint64(){return s.udec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,s.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getuint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getint32((this.pos+=4)-4,!0)}fixed64(){return s.udec(this.sfixed32(),this.sfixed32())}sfixed64(){return s.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getfloat32((this.pos+=4)-4,!0)}double(){return this.view.getfloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertbounds(),this.buf.subarray(n,n+e)}string(){return this.textdecoder.decode(this.bytes())}};function u(t,e,n){if(e===n)return!0;if(t==u.bytes){if(!(e instanceof uint8array)||!(n instanceof uint8array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case u.uint64:case u.fixed64:case u.int64:case u.sfixed64:case u.sint64:return e==n}return!1}function g(t,e){switch(t){case u.bool:return!1;case u.uint64:case u.fixed64:case u.int64:case u.sfixed64:case u.sint64:return e==0?s.zero:"0";case u.double:case u.float:return 0;case u.bytes:return new uint8array(0);case u.string:return"";default:return 0}}function oe(t,e){let n=e===void 0,r=k.varint,s=e===0;switch(t){case u.string:s=n||!e.length,r=k.lengthdelimited;break;case u.bool:s=e===!1;break;case u.double:r=k.bit64;break;case u.float:r=k.bit32;break;case u.int64:s=n||e==0;break;case u.uint64:s=n||e==0;break;case u.fixed64:s=n||e==0,r=k.bit64;break;case u.bytes:s=n||!e.bytelength,r=k.lengthdelimited;break;case u.fixed32:r=k.bit32;break;case u.sfixed32:r=k.bit32;break;case u.sfixed64:s=n||e==0,r=k.bit64;break;case u.sint64:s=n||e==0;break}let o=u[t].tolowercase();return[r,o,n||s]}function tt(t,e,n,r){let s;return{typename:e,extendee:n,get field(){if(!s){let o=typeof r=="function"?r():r;o.name=e.split(".").pop(),o.jsonname=`[${e}]`,s=t.util.newfieldlist([o]).list()[0]}return s},runtime:t}}function ie(t){let e=t.field.localname,n=object.create(null);return n[e]=qt(t),[n,()=>n[e]]}function qt(t){let e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.t.values[0].no;case"scalar":return g(e.t,e.l);case"message":let n=e.t,r=new n;return n.fieldwrapper?n.fieldwrapper.unwrapfield(r):r;case"map":throw"map fields are not allowed to be extensions"}}function nt(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}function rt(t,e,n,r){return{syntax:t,json:e,bin:n,util:r,makemessagetype(s,o,i){return ke(this,s,o,i)},makeenum:ye,makeenumtype:se,getenumtype:xe,makeextension(s,o,i){return tt(this,s,o,i)}}}function ae(t,e){return e instanceof e||!t.fieldwrapper?e:t.fieldwrapper.wrapfield(e)}var kr={"google.protobuf.doublevalue":u.double,"google.protobuf.floatvalue":u.float,"google.protobuf.int64value":u.int64,"google.protobuf.uint64value":u.uint64,"google.protobuf.int32value":u.int32,"google.protobuf.uint32value":u.uint32,"google.protobuf.boolvalue":u.bool,"google.protobuf.stringvalue":u.string,"google.protobuf.bytesvalue":u.bytes};var q=symbol("@bufbuild/protobuf/unknown-fields"),st={readunknownfields:!0,readerfactory:t=>new oe(t)},ot={writeunknownfields:!0,writerfactory:()=>new se};function zt(t){return t?object.assign(object.assign({},st),t):st}function en(t){return t?object.assign(object.assign({},ot),t):ot}function at(){return{makereadoptions:zt,makewriteoptions:en,listunknownfields(t){var e;return(e=t[q])!==null&&e!==void 0?e:[]},discardunknownfields(t){delete t[q]},writeunknownfields(t,e){let r=t[q];if(r)for(let s of r)e.tag(s.no,s.wiretype).raw(s.data)},onunknownfield(t,e,n,r){let s=t;array.isarray(s[q])||(s[q]=[]),s[q].push({no:e,wiretype:n,data:r})},readmessage(t,e,n,r,s){let o=t.gettype(),i=s?e.len:e.pos+n,a,c;for(;e.pos<i&&([a,c]=e.tag(),c!=k.endgroup);){let f=o.fields.find(a);if(!f){let m=e.skip(c);r.readunknownfields&&this.onunknownfield(t,a,c,m);continue}it(t,e,f,c,r)}if(s&&(c!=k.endgroup||a!==n))throw new error("invalid end group tag")},readfield:it}}function it(t,e,n,r,s){let{repeated:o,localname:i}=n;switch(n.oneof&&(t=t[n.oneof.localname],t.case!=i&&delete t.value,t.case=i,i="value"),n.kind){case"scalar":case"enum":let a=n.kind=="enum"?u.int32:n.t,c=ue;if(n.kind=="scalar"&&n.l>0&&(c=nn),o){let g=t[i];if(r==k.lengthdelimited&&a!=u.string&&a!=u.bytes){let h=e.uint32()+e.pos;for(;e.pos<h;)g.push(c(e,a))}else g.push(c(e,a))}else t[i]=c(e,a);break;case"message":let f=n.t;o?t[i].push(ce(e,new f,s,n)):t[i]instanceof e?ce(e,t[i],s,n):(t[i]=ce(e,new f,s,n),f.fieldwrapper&&!n.oneof&&!n.repeated&&(t[i]=f.fieldwrapper.unwrapfield(t[i])));break;case"map":let[m,l]=tn(n,e,s);t[i][m]=l;break}}function ce(t,e,n,r){let s=e.gettype().runtime.bin,o=r?.delimited;return s.readmessage(e,t,o?r?.no:t.uint32(),n,o),e}function tn(t,e,n){let r=e.uint32(),s=e.pos+r,o,i;for(;e.pos<s;){let[a]=e.tag();switch(a){case 1:o=ue(e,t.k);break;case 2:switch(t.v.kind){case"scalar":i=ue(e,t.v.t);break;case"enum":i=e.int32();break;case"message":i=ce(e,new t.v.t,n,void 0);break}break}}if(o===void 0){let a=g(t.k,m.bigint);o=t.k==u.bool?a.tostring():a}if(typeof o!="string"&&typeof o!="number"&&(o=o.tostring()),i===void 0)switch(t.v.kind){case"scalar":i=g(t.v.t,m.bigint);break;case"enum":i=0;break;case"message":i=new t.v.t;break}return[o,i]}function nn(t,e){let n=ue(t,e);return typeof n=="bigint"?n.tostring():n}function ue(t,e){switch(e){case u.string:return t.string();case u.bool:return t.bool();case u.double:return t.double();case u.float:return t.float();case u.int32:return t.int32();case u.int64:return t.int64();case u.uint64:return t.uint64();case u.fixed64:return t.fixed64();case u.bytes:return t.bytes();case u.fixed32:return t.fixed32();case u.sfixed32:return t.sfixed32();case u.sfixed64:return t.sfixed64();case u.sint64:return t.sint64();case u.uint32:return t.uint32();case u.sint32:return t.sint32()}}function ct(t,e,n,r,s){t.tag(n.no,k.lengthdelimited),t.fork();let o=r;switch(n.k){case u.int32:case u.fixed32:case u.uint32:case u.sfixed32:case u.sint32:o=number.parseint(r);break;case u.bool:i(r=="true"||r=="false"),o=r=="true";break}switch(w(t,n.k,1,o,!0),n.v.kind){case"scalar":w(t,n.v.t,2,s,!0);break;case"enum":w(t,u.int32,2,s,!0);break;case"message":t.tag(2,k.lengthdelimited).bytes(s.tobinary(e));break}t.join()}function ce(t,e,n,r){let s=ae(n.t,r);n?.delimited?t.tag(n.no,k.startgroup).raw(s.tobinary(e)).tag(n.no,k.endgroup):t.tag(n.no,k.lengthdelimited).bytes(s.tobinary(e))}function w(t,e,n,r,s){let[o,i,a]=oe(e,r);(!a||s)&&t.tag(n,o)[i](r)}function ut(t,e,n,r){if(!r.length)return;t.tag(n,k.lengthdelimited).fork();let[,s]=oe(e);for(let o=0;o<r.length;o++)t[s](r[o]);t.join()}function mt(){return object.assign(object.assign({},at()),{writefield:ft,writemessage(t,e,n){let r=t.gettype();for(let s of r.fields.bynumber()){let o,i=s.localname;if(s.oneof){let a=t[s.oneof.localname];if(a.case!==i)continue;o=a.value}else o=t[i];ft(s,o,e,n)}return n.writeunknownfields&&this.writeunknownfields(t,e),e}})}function ft(t,e,n,r){let s=t.repeated;switch(t.kind){case"scalar":case"enum":let o=t.kind=="enum"?u.int32:t.t;if(s)if(t.packed)ut(n,o,t.no,e);else for(let i of e)w(n,o,t.no,i,!0);else e!==void 0&&w(n,o,t.no,e,!!t.oneof||t.opt);break;case"message":if(s)for(let i of e)ce(n,r,t,i);else e!==void 0&&ce(n,r,t,e);break;case"map":for(let[i,a]of object.entries(e))ct(n,r,t,i,a);break}}var a="abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),fe=[];for(let t=0;t<a.length;t++)fe[a[t].charcodeat(0)]=t;fe["-".charcodeat(0)]=a.indexof("+");fe["_".charcodeat(0)]=a.indexof("/");var me={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new uint8array(e),r=0,s=0,o,i=0;for(let a=0;a<t.length;a++){if(o=fe[t.charcodeat(a)],o===void 0)switch(t[a]){case"=":s=0;case`
`:case"\r":case"	":case" ":continue;default:throw error("invalid base64 string.")}switch(s){case 0:i=o,s=1;break;case 1:n[r++]=i<<2|(o&48)>>4,i=o,s=2;break;case 2:n[r++]=(i&15)<<4|(o&60)>>2,i=o,s=3;break;case 3:n[r++]=(i&3)<<6|o,s=0;break}}if(s==1)throw error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,s=0;for(let o=0;o<t.length;o++)switch(r=t[o],n){case 0:e+=a[r>>2],s=(r&3)<<4,n=1;break;case 1:e+=a[s|r>>4],s=(r&15)<<2,n=2;break;case 2:e+=a[s|r>>6],e+=a[r&63],n=0;break}return n&&(e+=a[s],e+="=",n==1&&(e+="=")),e}};function dt(t,e,n){pt(e,t);let r=e.runtime.bin.makereadoptions(n),s=nt(t.gettype().runtime.bin.listunknownfields(t),e.field),[o,i]=ie(e);for(let a of s)e.runtime.bin.readfield(o,r.readerfactory(a.data),e.field,a.wiretype,r);return i()}function lt(t,e,n,r){pt(e,t);let s=e.runtime.bin.makereadoptions(r),o=e.runtime.bin.makewriteoptions(r);if(pe(t,e)){let f=t.gettype().runtime.bin.listunknownfields(t).filter(m=>m.no!=e.field.no);t.gettype().runtime.bin.discardunknownfields(t);for(let m of f)t.gettype().runtime.bin.onunknownfield(t,m.no,m.wiretype,m.data)}let i=o.writerfactory(),a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=object.assign(object.assign({},e.field),{opt:!0})),e.runtime.bin.writefield(a,n,i,o);let c=s.readerfactory(i.finish());for(;c.pos<c.len;){let[f,m]=c.tag(),l=c.skip(m);t.gettype().runtime.bin.onunknownfield(t,f,m,l)}}function pe(t,e){let n=t.gettype();return e.extendee.typename===n.typename&&!!n.runtime.bin.listunknownfields(t).find(r=>r.no==e.field.no)}function pt(t,e){i(t.extendee.typename==e.gettype().typename,`extension ${t.typename} can only be applied to message ${t.extendee.typename}`)}var gt={ignoreunknownfields:!1},ht={emitdefaultvalues:!1,enumasinteger:!1,useprotofieldname:!1,prettyspaces:0};function rn(t){return t?object.assign(object.assign({},gt),t):gt}function sn(t){return t?object.assign(object.assign({},ht),t):ht}function kt(t,e){let n=e(on,bt);return{makereadoptions:rn,makewriteoptions:sn,readmessage(r,s,o,i){if(s==null||array.isarray(s)||typeof s!="object")throw new error(`cannot decode message ${r.typename} from json: ${p(s)}`);i=i??new r;let a=new map,c=o.typeregistry;for(let[f,m]of object.entries(s)){let l=r.fields.findjsonname(f);if(l){if(l.oneof){if(m===null&&l.kind=="scalar")continue;let g=a.get(l.oneof);if(g!==void 0)throw new error(`cannot decode message ${r.typename} from json: multiple keys for oneof "${l.oneof.name}" present: "${g}", "${f}"`);a.set(l.oneof,f)}yt(i,m,l,o,r,t)}else{let g=!1;if(c?.findextension&&f.startswith("[")&&f.endswith("]")){let p=c.findextension(f.substring(1,f.length-1));if(p&&p.extendee.typename==r.typename){g=!0;let[h,r]=ie(p);yt(h,m,p.field,o,p,!0),lt(i,p,r(),o)}}if(!g&&!o.ignoreunknownfields)throw new error(`cannot decode message ${r.typename} from json: key "${f}" is unknown`)}}return i},writemessage(r,s){let o=r.gettype(),i={},a;try{for(let f of o.fields.bymember()){let m;if(f.kind=="oneof"){let l=r[f.localname];if(l.value===void 0)continue;if(a=f.findfield(l.case),!a)throw"oneof case not found: "+l.case;m=n(a,l.value,s)}else a=f,m=n(a,r[a.localname],s);m!==void 0&&(i[s.useprotofieldname?a.name:a.jsonname]=m)}let c=s.typeregistry;if(c?.findextensionfor)for(let f of o.runtime.bin.listunknownfields(r)){let m=c.findextensionfor(o.typename,f.no);if(m&&pe(r,m)){let l=dt(r,m,s),g=n(m.field,l,s);g!==void 0&&(i[m.field.jsonname]=g)}}}catch(c){let f=a?`cannot encode field ${o.typename}.${a.name} to json`:`cannot encode message ${o.typename} to json`,m=c instanceof error?c.message:string(c);throw new error(f+(m.length>0?`: ${m}`:""))}return i},readscalar:(r,s,o)=>h(r,s,o,t),writescalar:bt,debug:p}}function p(t){if(t===null)return"null";switch(typeof t){case"object":return array.isarray(t)?"array":"object";case"string":return t.length>100?"string":`"${t.split('"').join('\\"')}"`;default:return string(t)}}function yt(t,e,n,r,s,o){let i=n.localname;if(n.oneof){if(e===null&&n.kind=="scalar")return;t=t[n.oneof.localname]={case:i},i="value"}if(n.repeated){if(e===null)return;if(!array.isarray(e))throw new error(`cannot decode field ${s.typename}.${n.name} from json: ${p(e)}`);let a=t[i];for(let c of e){if(c===null)throw new error(`cannot decode field ${s.typename}.${n.name} from json: ${p(c)}`);let f;switch(n.kind){case"message":f=n.t.fromjson(c,r);break;case"enum":if(f=ue(n.t,c,r.ignoreunknownfields,!0),f===void 0)continue;break;case"scalar":try{f=h(n.t,c,n.l,!0)}catch(m){let l=`cannot decode field ${s.typename}.${n.name} from json: ${p(c)}`;throw m instanceof error&&m.message.length>0&&(l+=`: ${m.message}`),new error(l)}break}a.push(f)}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||array.isarray(e))throw new error(`cannot decode field ${s.typename}.${n.name} from json: ${p(e)}`);let a=t[i];for(let[c,f]of object.entries(e)){if(f===null)throw new error(`cannot decode field ${s.typename}.${n.name} from json: map value null`);let m;switch(n.v.kind){case"message":m=n.v.t.fromjson(f,r);break;case"enum":if(m=ue(n.v.t,f,r.ignoreunknownfields,!0),m===void 0)continue;break;case"scalar":try{m=h(n.v.t,f,m.bigint,!0)}catch(l){let g=`cannot decode map value for field ${s.typename}.${n.name} from json: ${p(e)}`;throw l instanceof error&&l.message.length>0&&(g+=`: ${l.message}`),new error(g)}break}try{a[h(n.k,n.k==u.bool?c=="true"?!0:c=="false"?!1:c:c,m.bigint,!0).tostring()]=m}catch(l){let g=`cannot decode map key for field ${s.typename}.${n.name} from json: ${p(e)}`;throw l instanceof error&&l.message.length>0&&(g+=`: ${l.message}`),new error(g)}}}else switch(n.kind){case"message":let a=n.t;if(e===null&&a.typename!="google.protobuf.value"){if(n.oneof)throw new error(`cannot decode field ${s.typename}.${n.name} from json: null is invalid for oneof field`);return}t[i]instanceof e?t[i].fromjson(e,r):(t[i]=a.fromjson(e,r),a.fieldwrapper&&!n.oneof&&(t[i]=a.fieldwrapper.unwrapfield(t[i])));break;case"enum":let c=ue(n.t,e,r.ignoreunknownfields,o);c!==void 0&&(t[i]=c);break;case"scalar":try{t[i]=h(n.t,e,n.l,o)}catch(f){let m=`cannot decode field ${s.typename}.${n.name} from json: ${p(e)}`;throw f instanceof error&&f.message.length>0&&(m+=`: ${f.message}`),new error(m)}break}}function h(t,e,n,r){switch(t){case u.double:case u.float:if(e===null)return r?0:void 0;if(e==="nan")return number.nan;if(e==="infinity")return number.positive_infinity;if(e==="-infinity")return number.negative_infinity;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;let s=number(e);if(number.isnan(s)||!number.isfinite(s))break;return t==u.float&&te(s),s;case u.int32:case u.fixed32:case u.sfixed32:case u.sint32:case u.uint32:if(e===null)return r?0:void 0;let o;if(typeof e=="number"?o=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(o=number(e)),o===void 0)break;return t==u.uint32?z(o):_(o),o;case u.int64:case u.sfixed64:case u.sint64:if(e===null)return r?s.zero:void 0;if(typeof e!="number"&&typeof e!="string")break;let i=s.parse(e);return n?i.tostring():i;case u.fixed64:case u.uint64:if(e===null)return r?s.zero:void 0;if(typeof e!="number"&&typeof e!="string")break;let a=s.uparse(e);return n?a.tostring():a;case u.bool:if(e===null)return r?!1:void 0;if(typeof e!="boolean")break;return e;case u.string:if(e===null)return r?"":void 0;if(typeof e!="string")break;try{encodeuricomponent(e)}catch{throw new error("invalid utf8")}return e;case u.bytes:if(e===null)return r?new uint8array(0):void 0;if(e==="")return new uint8array(0);if(typeof e!="string")break;return me.dec(e)}throw new error}function ue(t,e,n,r){if(e===null)return r?t.values[0].no:void 0;switch(typeof e){case"number":if(number.isinteger(e))return e;break;case"string":let s=t.findname(e);if(s||n)return s?.no;break}throw new error(`cannot decode enum ${t.typename} from json: ${p(e)}`)}function on(t,e,n,r){var s;if(e===void 0)return e;if(!n&&t.values[0].no===e)return;if(r)return e;if(t.typename=="google.protobuf.nullvalue")return null;let o=t.findnumber(e);return(s=o?.name)!==null&&s!==void 0?s:e}function bt(t,e,n){if(e!==void 0)switch(t){case u.int32:case u.sfixed32:case u.sint32:case u.fixed32:case u.uint32:return i(typeof e=="number"),e!=0||n?e:void 0;case u.float:case u.double:return i(typeof e=="number"),number.isnan(e)?"nan":e===number.positive_infinity?"infinity":e===number.negative_infinity?"-infinity":e!==0||n?e:void 0;case u.string:return i(typeof e=="string"),e.length>0||n?e:void 0;case u.bool:return i(typeof e=="boolean"),e||n?e:void 0;case u.uint64:case u.fixed64:case u.int64:case u.sfixed64:case u.sint64:return i(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),n||e!=0?e.tostring(10):void 0;case u.bytes:return i(e instanceof uint8array),n||e.bytelength>0?me.enc(e):void 0}}function tt(){return kt(!0,(t,e)=>function(r,s,o){if(r.kind=="map"){let i={};switch(r.v.kind){case"scalar":for(let[c,f]of object.entries(s)){let m=e(r.v.t,f,!0);i(m!==void 0),i[c.tostring()]=m}break;case"message":for(let[c,f]of object.entries(s))i[c.tostring()]=f.tojson(o);break;case"enum":let a=r.v.t;for(let[c,f]of object.entries(s)){i(f===void 0||typeof f=="number");let m=t(a,f,!0,o.enumasinteger);i(m!==void 0),i[c.tostring()]=m}break}return o.emitdefaultvalues||object.keys(i).length>0?i:void 0}else if(r.repeated){let i=[];switch(r.kind){case"scalar":for(let a=0;a<s.length;a++)i.push(e(r.t,s[a],!0));break;case"enum":for(let a=0;a<s.length;a++)i.push(t(r.t,s[a],!0,o.enumasinteger));break;case"message":for(let a=0;a<s.length;a++)i.push(s[a].tojson(o));break}return o.emitdefaultvalues||i.length>0?i:void 0}else{if(s===void 0)return;switch(r.kind){case"scalar":return e(r.t,s,!!r.oneof||r.opt||o.emitdefaultvalues);case"enum":return t(r.t,s,!!r.oneof||r.opt||o.emitdefaultvalues,o.enumasinteger);case"message":return ae(r.t,s).tojson(o)}}})}function wt(){return{setenumtype:ne,initpartial(t,e){if(t===void 0)return;let n=e.gettype();for(let r of n.fields.bymember()){let s=r.localname,o=e,i=t;if(i[s]!==void 0)switch(r.kind){case"oneof":let a=i[s].case;if(a===void 0)continue;let c=r.findfield(a),f=i[s].value;c&&c.kind=="message"&&!(f instanceof c.t)?f=new c.t(f):c&&c.kind==="scalar"&&c.t===u.bytes&&(f=q(f)),o[s]={case:a,value:f};break;case"scalar":case"enum":let m=i[s];r.t===u.bytes&&(m=r.repeated?m.map(q):q(m)),o[s]=m;break;case"map":switch(r.v.kind){case"scalar":case"enum":if(r.v.t===u.bytes)for(let[p,h]of object.entries(i[s]))o[s][p]=q(h);else object.assign(o[s],i[s]);break;case"message":let g=r.v.t;for(let p of object.keys(i[s])){let h=i[s][p];g.fieldwrapper||(h=new g(h)),o[s][p]=h}break}break;case"message":let l=r.t;if(r.repeated)o[s]=i[s].map(g=>g instanceof l?g:new l(g));else if(i[s]!==void 0){let g=i[s];l.fieldwrapper?l.typename==="google.protobuf.bytesvalue"?o[s]=q(g):o[s]=g:o[s]=g instanceof l?g:new l(g)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.bymember().every(r=>{let s=e[r.localname],o=n[r.localname];if(r.repeated){if(s.length!==o.length)return!1;switch(r.kind){case"message":return s.every((i,a)=>r.t.equals(i,o[a]));case"scalar":return s.every((i,a)=>u(r.t,i,o[a]));case"enum":return s.every((i,a)=>u(u.int32,i,o[a]))}throw new error(`repeated cannot contain ${r.kind}`)}switch(r.kind){case"message":return r.t.equals(s,o);case"enum":return u(u.int32,s,o);case"scalar":return u(r.t,s,o);case"oneof":if(s.case!==o.case)return!1;let i=r.findfield(s.case);if(i===void 0)return!0;switch(i.kind){case"message":return i.t.equals(s.value,o.value);case"enum":return u(u.int32,s.value,o.value);case"scalar":return u(i.t,s.value,o.value)}throw new error(`oneof cannot contain ${i.kind}`);case"map":let a=object.keys(s).concat(object.keys(o));switch(r.v.kind){case"message":let c=r.v.t;return a.every(m=>c.equals(s[m],o[m]));case"enum":return a.every(m=>u(u.int32,s[m],o[m]));case"scalar":let f=r.v.t;return a.every(m=>u(f,s[m],o[m]))}break}})},clone(t){let e=t.gettype(),n=new e,r=n;for(let s of e.fields.bymember()){let o=t[s.localname],i;if(s.repeated)i=o.map(me);else if(s.kind=="map"){i=r[s.localname];for(let[a,c]of object.entries(o))i[a]=me(c)}else s.kind=="oneof"?i=s.findfield(o.case)?{case:o.case,value:me(o.value)}:{case:void 0}:i=me(o);r[s.localname]=i}return n}}}function me(t){if(t===void 0)return t;if(t instanceof e)return t.clone();if(t instanceof uint8array){let e=new uint8array(t.bytelength);return e.set(t),e}return t}function q(t){return t instanceof uint8array?t:new uint8array(t)}var de=class{constructor(e,n){this._fields=e,this._normalizer=n}findjsonname(e){if(!this.jsonnames){let n={};for(let r of this.list())n[r.jsonname]=n[r.name]=r;this.jsonnames=n}return this.jsonnames[e]}find(e){if(!this.numbers){let n={};for(let r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}bynumber(){return this.numbersasc||(this.numbersasc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersasc}bymember(){if(!this.members){this.members=[];let e=this.members,n;for(let r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}};function ae(t,e){let n=nt(t);return e?n:fn(un(n))}function xt(t){return ae(t,!1)}var it=nt;function nt(t){let e=!1,n=[];for(let r=0;r<t.length;r++){let s=t.charat(r);switch(s){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(s),e=!1;break;default:e&&(e=!1,s=s.touppercase()),n.push(s);break}}return n.join("")}var an=new set(["constructor","tostring","tojson","valueof"]),cn=new set(["gettype","clone","equals","frombinary","fromjson","fromjsonstring","tobinary","tojson","tojsonstring","toobject"]),st=t=>`${t}$`,un=t=>cn.has(t)?st(t):t,fn=t=>an.has(t)?st(t):t;var le=class{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localname=xt(e)}addfield(e){i(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findfield(e){if(!this._lookup){this._lookup=object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localname]=this.fields[n]}return this._lookup[e]}};var d=rt("proto3",tt(),mt(),object.assign(object.assign({},wt()),{newfieldlist(t){return new de(t,mn)},initfields(t){for(let e of t.gettype().fields.bymember()){if(e.opt)continue;let n=e.localname,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=g(e.t,e.l);break;case"message":break}}}}));function mn(t){var e,n,r,s;let o=[],i;for(let a of typeof t=="function"?t():t){let c=a;if(c.localname=ae(a.name,a.oneof!==void 0),c.jsonname=(e=a.jsonname)!==null&&e!==void 0?e:it(a.name),c.repeated=(n=a.repeated)!==null&&n!==void 0?n:!1,a.kind=="scalar"&&(c.l=(r=a.l)!==null&&r!==void 0?r:m.bigint),a.oneof!==void 0){let f=typeof a.oneof=="string"?a.oneof:a.oneof.name;(!i||i.name!=f)&&(i=new le(f)),c.oneof=i,i.addfield(c)}a.kind=="message"&&(c.delimited=!1),c.packed=(s=a.packed)!==null&&s!==void 0?s:a.kind=="enum"||a.kind=="scalar"&&a.t!=u.bytes&&a.t!=u.string,o.push(c)}return o}var ft=d.makemessagetype("youtube.response.browse.browse",()=>[{no:1,name:"responsecontext",kind:"message",t:dn},{no:9,name:"contents",kind:"message",t:d},{no:10,name:"onresponsereceivedactions",kind:"message",t:d}]),dn=d.makemessagetype("youtube.response.browse.responsecontext",()=>[{no:6,name:"servicetrackingparams",kind:"message",t:ln,repeated:!0}]),ln=d.makemessagetype("youtube.response.browse.servicetrackingparams",()=>[{no:1,name:"service",kind:"scalar",t:5},{no:2,name:"params",kind:"message",t:pn,repeated:!0}]),pn=d.makemessagetype("youtube.response.browse.params",()=>[{no:1,name:"key",kind:"scalar",t:9},{no:2,name:"value",kind:"scalar",t:9}]),d=d.makemessagetype("youtube.response.browse.contents",()=>[{no:58173949,name:"browseresultsrenderer",kind:"message",t:gn},{no:153515154,name:"videowithcontextrenderer",kind:"message",t:bt},{no:49399797,name:"richgridrenderer",kind:"message",t:ve}]),gn=d.makemessagetype("youtube.response.browse.browseresultsrenderer",()=>[{no:1,name:"tabs",kind:"message",t:hn,repeated:!0}]),hn=d.makemessagetype("youtube.response.browse.tab",()=>[{no:58174010,name:"tabrenderer",kind:"message",t:yn}]),yn=d.makemessagetype("youtube.response.browse.tabrenderer",()=>[{no:4,name:"contents",kind:"message",t:d}]),ve=d.makemessagetype("youtube.response.browse.richgridrenderer",()=>[{no:1,name:"richgridcontents",kind:"message",t:bn,repeated:!0}]),bn=d.makemessagetype("youtube.response.browse.richgridcontent",()=>[{no:50195462,name:"richitemrenderer",kind:"message",t:le},{no:51845067,name:"richsectionrenderer",kind:"message",t:fn},{no:221496734,name:"musicdescriptionshelfrenderer",kind:"message",t:on}]),le=d.makemessagetype("youtube.response.browse.richitemrenderer",()=>[{no:1,name:"richitemcontent",kind:"message",t:rt,repeated:!0}]),rt=d.makemessagetype("youtube.response.browse.richitemcontent",()=>[{no:153515154,name:"videowithcontextrenderer",kind:"message",t:bt}]),bt=d.makemessagetype("youtube.response.browse.videowithcontextrenderer",()=>[{no:172660663,name:"videorenderercontent",kind:"message",t:kn}]),kn=d.makemessagetype("youtube.response.browse.videorenderercontent",()=>[{no:1,name:"videoinfo",kind:"message",t:tn},{no:2,name:"renderinfo",kind:"message",t:sn}]),tn=d.makemessagetype("youtube.response.browse.videoinfo",()=>[{no:168777401,name:"videocontext",kind:"message",t:wn}]),wn=d.makemessagetype("youtube.response.browse.videocontext",()=>[{no:5,name:"videocontent",kind:"message",t:xn}]),xn=d.makemessagetype("youtube.response.browse.videocontent",()=>[{no:465160965,name:"timedlyricsrender",kind:"message",t:in}]),in=d.makemessagetype("youtube.response.browse.timedlyricsrender",()=>[{no:4,name:"timedlyricscontent",kind:"message",t:nn}]),nn=d.makemessagetype("youtube.response.browse.timedlyricscontent",()=>[{no:1,name:"runs",kind:"message",t:ot,repeated:!0},{no:2,name:"footerlabel",kind:"scalar",t:9}]),sn=d.makemessagetype("youtube.response.browse.renderinfo",()=>[{no:183314536,name:"layoutrender",kind:"message",t:en}]),en=d.makemessagetype("youtube.response.browse.layoutrender",()=>[{no:1,name:"eml",kind:"scalar",t:9}]),fn=d.makemessagetype("youtube.response.browse.richsectionrenderer",()=>[{no:5,name:"richsectioncontent",kind:"message",t:rn}]),rn=d.makemessagetype("youtube.response.browse.richsectioncontent",()=>[{no:51431404,name:"reelshelfrenderer",kind:"message",t:bn}]),bn=d.makemessagetype("youtube.response.browse.reelshelfrenderer",()=>[{no:1,name:"richitemcontent",kind:"message",t:rt,repeated:!0}]),on=d.makemessagetype("youtube.response.browse.musicdescriptionshelfrenderer",()=>[{no:3,name:"description",kind:"message",t:et},{no:10,name:"footer",kind:"message",t:et}]),et=d.makemessagetype("youtube.response.browse.label",()=>[{no:1,name:"runs",kind:"message",t:ot,repeated:!0}]),ot=d.makemessagetype("youtube.response.browse.run",()=>[{no:1,name:"text",kind:"scalar",t:9}]);var ct=d.makemessagetype("youtube.response.next.next",()=>[{no:7,name:"contents",kind:"message",t:cn},{no:8,name:"onresponsereceivedactions",kind:"message",t:d}]),cn=d.makemessagetype("youtube.response.next.contents",()=>[{no:51779735,name:"nextresults",kind:"message",t:mn}]),mn=d.makemessagetype("youtube.response.next.nextresults",()=>[{no:1,name:"contents",kind:"message",t:d}]);var mt=d.makemessagetype("youtube.response.search.search",()=>[{no:4,name:"contents",kind:"message",t:d},{no:7,name:"onresponsereceivedcommands",kind:"message",t:pn}]),pn=d.makemessagetype("youtube.response.search.onresponsereceivedcommands",()=>[{no:50195462,name:"richitemrenderer",kind:"message",t:le},{no:49399797,name:"appendcontinuationitemsaction",kind:"message",t:ve}]);var pt=d.makemessagetype("youtube.response.shorts.shorts",()=>[{no:2,name:"entries",kind:"message",t:un,repeated:!0}]),un=d.makemessagetype("youtube.response.shorts.entry",()=>[{no:1,name:"command",kind:"message",t:an}]),an=d.makemessagetype("youtube.response.shorts.command",()=>[{no:139608561,name:"reelwatchendpoint",kind:"message",t:vn}]),vn=d.makemessagetype("youtube.response.shorts.reelwatchendpoint",()=>[{no:8,name:"overlay",kind:"message",t:ln}]),ln=d.makemessagetype("youtube.response.shorts.overlay",()=>[{no:139970731,name:"reelplayeroverlayrenderer",kind:"message",t:dn}]),dn=d.makemessagetype("youtube.response.shorts.reelplayeroverlayrenderer",()=>[{no:12,name:"style",kind:"scalar",t:5}]);var vt=d.makemessagetype("youtube.response.browse.guide",()=>[{no:4,name:"items4",kind:"message",t:ut,repeated:!0},{no:6,name:"items6",kind:"message",t:ut,repeated:!0}]),ut=d.makemessagetype("youtube.response.browse.item",()=>[{no:117866661,name:"guidesectionrenderer",kind:"message",t:$n}]),$n=d.makemessagetype("youtube.response.browse.guidesectionrenderer",()=>[{no:1,name:"rendereritems",kind:"message",t:vn,repeated:!0}]),vn=d.makemessagetype("youtube.response.browse.rendereritem",()=>[{no:318370163,name:"iconrender",kind:"message",t:at},{no:117501096,name:"labelrender",kind:"message",t:at}]),at=d.makemessagetype("youtube.response.browse.guideentryrenderer",()=>[{no:1,name:"browseid",kind:"scalar",t:9}]);var pe=d.makemessagetype("youtube.response.player.player",()=>[{no:7,name:"adplacements",kind:"message",t:jn,repeated:!0},{no:2,name:"playabilitystatus",kind:"message",t:_n},{no:9,name:"playbacktracking",kind:"message",t:yn},{no:10,name:"captions",kind:"message",t:jn}]),jn=d.makemessagetype("youtube.response.player.adplacement",()=>[{no:84813246,name:"adplacementrenderer",kind:"message",t:gn}]),gn=d.makemessagetype("youtube.response.player.adplacementrenderer",()=>[{no:4,name:"params",kind:"scalar",t:9}]),_n=d.makemessagetype("youtube.response.player.playabilitystatus",()=>[{no:21,name:"miniplayer",kind:"message",t:qn},{no:11,name:"backgroundplayer",kind:"message",t:de}]),qn=d.makemessagetype("youtube.response.player.miniplayer",()=>[{no:151635310,name:"miniplayerrender",kind:"message",t:wn}]),de=d.makemessagetype("youtube.response.player.backgroundplayer",()=>[{no:64657230,name:"backgroundplayerrender",kind:"message",t:xn}]),wn=d.makemessagetype("youtube.response.player.miniplayerrender",()=>[{no:1,name:"active",kind:"scalar",t:8}]),xn=d.makemessagetype("youtube.response.player.backgroundplayerrender",()=>[{no:1,name:"active",kind:"scalar",t:8}]),yn=d.makemessagetype("youtube.response.player.playbacktracking",()=>[{no:1,name:"videostatsplaybackurl",kind:"message",t:$},{no:2,name:"videostatsdelayplayurl",kind:"message",t:$},{no:3,name:"videostatswatchtimeurl",kind:"message",t:$},{no:4,name:"ptrackingurl",kind:"message",t:$},{no:5,name:"qoeurl",kind:"message",t:$},{no:13,name:"atrurl",kind:"message",t:$},{no:15,name:"videostatsengageurl",kind:"message",t:$},{no:18,name:"pageadviewthroughconversion",kind:"message",t:$}]),$=d.makemessagetype("youtube.response.player.tracking",()=>[{no:1,name:"baseurl",kind:"scalar",t:9}]),jn=d.makemessagetype("youtube.response.player.captions",()=>[{no:51621377,name:"playercaptionstracklistrenderer",jsonname:"playercaptionstracklistrenderer",kind:"message",t:kn}]),kn=d.makemessagetype("youtube.response.player.playercaptionstracklistrenderer",()=>[{no:1,name:"captiontracks",kind:"message",t:$e,repeated:!0},{no:2,name:"audiotracks",kind:"message",t:zn,repeated:!0},{no:3,name:"translationlanguages",kind:"message",t:ve,repeated:!0},{no:4,name:"defaultaudiotrackindex",kind:"scalar",t:5,opt:!0},{no:6,name:"defaultcaptiontrackindex",kind:"scalar",t:5,opt:!0}]),$e=d.makemessagetype("youtube.response.player.captiontrack",()=>[{no:1,name:"baseurl",kind:"scalar",t:9},{no:2,name:"name",kind:"message",t:lt},{no:3,name:"vssid",kind:"scalar",t:9},{no:4,name:"languagecode",kind:"scalar",t:9},{no:5,name:"kind",kind:"scalar",t:9,opt:!0},{no:6,name:"rtl",kind:"scalar",t:8,opt:!0},{no:7,name:"istranslatable",kind:"scalar",t:8}]),zn=d.makemessagetype("youtube.response.player.audiotrack",()=>[{no:2,name:"captiontrackindices",kind:"scalar",t:5,repeated:!0,packed:!1},{no:3,name:"defaultcaptiontrackindex",kind:"scalar",t:5,opt:!0},{no:4,name:"forcedcaptiontrackindex",kind:"scalar",t:5,opt:!0},{no:5,name:"visibility",kind:"scalar",t:5,opt:!0},{no:6,name:"hasdefaulttrack",kind:"scalar",t:8,opt:!0},{no:7,name:"hasforcedtrack",kind:"scalar",t:8,opt:!0},{no:8,name:"audiotrackid",kind:"scalar",t:9,opt:!0},{no:11,name:"captionsinitialstate",kind:"scalar",t:5,opt:!0}]),ve=d.makemessagetype("youtube.response.player.translationlanguage",()=>[{no:1,name:"languagecode",kind:"scalar",t:9},{no:2,name:"languagename",kind:"message",t:lt}]),lt=d.makemessagetype("youtube.response.player.name",()=>[{no:1,name:"runs",kind:"message",t:hn,repeated:!0}]),hn=d.makemessagetype("youtube.response.player.name.run",()=>[{no:1,name:"text",kind:"scalar",t:9}],{localname:"name_run"});var $t=d.makemessagetype("youtube.response.setting.setting",()=>[{no:6,name:"settingitems",kind:"message",t:je,repeated:!0},{no:10,name:"trackingparams",kind:"message",t:ge}]),je=d.makemessagetype("youtube.response.setting.settingitem",()=>[{no:88478200,name:"settingcategoryentryrenderer",kind:"message",t:zn},{no:66930374,name:"settingcategorycollectionrenderer",kind:"message",t:er}]),ge=d.makemessagetype("youtube.response.setting.trackingparams",()=>[{no:1,name:"f1",kind:"scalar",t:5},{no:2,name:"f2",kind:"scalar",t:5},{no:3,name:"f3",kind:"scalar",t:5},{no:4,name:"timeinfo",kind:"message",t:qn}]),qn=d.makemessagetype("youtube.response.setting.timeinfo",()=>[{no:1,name:"timestamp",kind:"scalar",t:4,l:1},{no:2,name:"f2",kind:"scalar",t:7},{no:3,name:"f3",kind:"scalar",t:7}]),zn=d.makemessagetype("youtube.response.setting.settingcategoryentryrenderer",()=>[{no:2,name:"f2",kind:"scalar",t:5},{no:3,name:"f3",kind:"scalar",t:5},{no:5,name:"trackingparams",kind:"message",t:ge},{no:6,name:"f6",kind:"scalar",t:5},{no:7,name:"f7",kind:"scalar",t:5},{no:8,name:"f8",kind:"scalar",t:5},{no:9,name:"f9",kind:"scalar",t:5},{no:10,name:"f10",kind:"scalar",t:5},{no:12,name:"f12",kind:"scalar",t:5}]),er=d.makemessagetype("youtube.response.setting.settingcategorycollectionrenderer",()=>[{no:3,name:"subsettings",kind:"message",t:ge,repeated:!0},{no:4,name:"categoryid",kind:"scalar",t:5}]),ge=d.makemessagetype("youtube.response.setting.subsetting",()=>[{no:61331416,name:"settingbooleanrenderer",kind:"message",t:tr}]),tr=d.makemessagetype("youtube.response.setting.settingbooleanrenderer",()=>[{no:5,name:"enableserviceendpoint",kind:"message",t:dt},{no:6,name:"disableserviceendpoint",kind:"message",t:dt},{no:13,name:"clicktrackingparams",kind:"message",t:ge},{no:15,name:"itemid",kind:"scalar",t:5}]),dt=d.makemessagetype("youtube.response.setting.serviceendpoint",()=>[{no:2,name:"trackingparams",kind:"message",t:ge},{no:81212182,name:"setclientsettingendpoint",kind:"message",t:nr}]),nr=d.makemessagetype("youtube.response.setting.setclientsettingendpoint",()=>[{no:1,name:"settingdatas",kind:"message",t:rr}]),rr=d.makemessagetype("youtube.response.setting.settingdatas",()=>[{no:1,name:"clientsettingenum",kind:"message",t:sr},{no:3,name:"boolvalue",kind:"scalar",t:8}]),sr=d.makemessagetype("youtube.response.setting.clientsettingenum",()=>[{no:1,name:"item",kind:"scalar",t:5}]);var vt=d.makemessagetype("youtube.response.watch.watch",()=>[{no:1,name:"content",kind:"message",t:or,repeated:!0}]),or=d.makemessagetype("youtube.response.watch.content",()=>[{no:2,name:"player",kind:"message",t:pe}]);var x=class{_times=new map;name;isdebug;classname;request;response;constructor(e,n,r){this.name=e??"",this.isdebug=r?.debug??!1,e&&this.debug(`${e} start`),this.classname=n??"",this.init()}static getinstance(e,n){let r="surge";return typeof $loon<"u"?r="loon":typeof $task<"u"&&(r="quanx"),x.instances[r]||(x.instances[r]=x.classnames[r](e,r,n)),x.instances[r]}createproxy(e){return new proxy(e,{get:this.getfn,set:this.setfn})}getfn(e,n,r){return e[n]}setfn(e,n,r,s){return e[n]=r,!0}getjson(e,n={}){let r=this.getval(e);return r?json.parse(r):n}setjson(e,n){this.setval(json.stringify(e),n)}msg(e=this.name,n="",r="",s){}debug(e){this.isdebug&&(typeof e=="object"&&(e=json.stringify(e)),console.log(e))}log(e){typeof e=="object"&&(e=json.stringify(e)),console.log(e)}timestart(e){this._times.set(e,date.now())}timeend(e){if(this._times.has(e)){let n=this._times.get(e)??0,r=date.now()-n;this.debug(`${e}: ${r}ms`),this._times.delete(e)}else this.debug(`timer with label ${e} does not exist.`)}exit(){$done({})}reject(){$done()}decodeparams(e,n){return e}},l=x;k(l,"instances",{}),k(l,"classnames",{quanx:(e,n,r)=>new he(e,n,r),surge:(e,n,r)=>new z(e,n,r),loon:(e,n,r)=>new _e(e,n,r)});var ye=class extends l{getfn(e,n,r){let s=ye.clientadapter[n]||n;return super.getfn(e,s,r)}setfn(e,n,r,s){let o=ye.clientadapter[n]||n;return super.setfn(e,o,r,s)}init(){try{this.request=this.createproxy($request),this.response=this.createproxy($response)}catch(e){this.debug(e.tostring())}}getval(e){return $persistentstore.read(e)}setval(e,n){$persistentstore.write(e,n)}msg(e=this.name,n="",r="",s){$notification.post(e,n,r,{url:s??""})}async fetch(e){return await new promise((n,r)=>{let{method:s,body:o,bodybytes:i,...a}=e,c=i??o,f=c instanceof uint8array;$httpclient[s.tolowercase()]({...a,body:c,"binary-mode":f},(m,l,g)=>{m&&r(m);let p=f?"bodybytes":"body";n({status:l.status||l.statuscode,headers:l.headers,[p]:g})})})}done(e){let n=e.response??e,r,s;n.bodybytes?(r=n.bodybytes,delete n.bodybytes,s={...e},s.response?s.response.body=r:s.body=r):s=e,$done(s)}decodeparams(e,n){return typeof $argument=="string"&&!$argument.includes("{{{")&&object.assign(e,json.parse($argument)),e}},z=ye;k(z,"clientadapter",{bodybytes:"body"});var v=class extends l{static transferbodybytes(e,n){return e instanceof arraybuffer?n==="uint8array"?new uint8array(e):e:e instanceof uint8array&&n==="arraybuffer"?e.buffer.slice(e.byteoffset,e.bytelength+e.byteoffset):e}init(){try{this.request=this.createproxy($request),this.response=this.createproxy($response)}catch(e){this.debug(e.tostring())}}getfn(e,n,r){let s=v.clientadapter[n]||n,o=super.getfn(e,s,r);return n==="bodybytes"&&(o=v.transferbodybytes(o,"uint8array")),o}setfn(e,n,r,s){let o=v.clientadapter[n]||n,i=r;return n==="bodybytes"&&(i=v.transferbodybytes(i,"uint8array")),super.setfn(e,o,i,s)}getval(e){return $prefs.valueforkey(e)?.replace(/\0/g,"")}setval(e,n){$prefs.setvalueforkey(e,n)}msg(e=this.name,n="",r="",s){$notify(e,n,r,{"open-url":s??""})}async fetch(e){return await new promise(n=>{let r={url:"",method:"get"};for(let[s,o]of object.entries(e))s==="id"?r.sessionindex=o:s==="bodybytes"?r.bodybytes=v.transferbodybytes(o,"arraybuffer"):r[s]=o;e.bodybytes&&delete r.body,$task.fetch(r).then(s=>{let o={status:200,headers:{}};for(let[i,a]of object.entries(s))i==="sessionindex"?o.id=a:i==="bodybytes"?o.bodybytes=v.transferbodybytes(a,"uint8array"):i==="statuscode"?o.status=a:o[i]=a;n(o)})})}done(e){let n=e.response??e,r={};for(let[s,o]of object.entries(n))s==="status"?r.status=`http/1.1 ${o}`:s==="bodybytes"?r.bodybytes=v.transferbodybytes(o,"arraybuffer"):r[s]=o;$done(r)}},he=v;k(he,"clientadapter",{id:"sessionindex",status:"statuscode"});var _e=class extends z{decodeparams(e,n){let r={};for(let[s,o]of object.entries(e)){let i=n?.[s]??s,a=this.getval(i);a&&(r[s]=this.transfertype(o,a))}return object.assign(e,r),e}transfertype(e,n){return typeof e=="boolean"?n==="true":typeof e=="number"?number(n):n}};var b=l.getinstance("youtube");var v=class{name;needprocess;needsave;message;whiteno;blackno;whiteeml;blackeml;msgtype;argument;decoder=new textdecoder("utf-8",{fatal:!1,ignorebom:!0});constructor(e,n){this.name=n,this.msgtype=e,this.argument=this.decodeargument(),b.isdebug=boolean(this.argument.debug),b.debug(this.name),object.assign(this,b.getjson("youtubeadvertiseinfo",{whiteno:[],blackno:[],whiteeml:[],blackeml:[]}))}decodeargument(){let e={lyriclang:"歌词翻译语言",captionlang:"字幕翻译语言",blockupload:"隐藏上传按钮",blockimmersive:"隐藏选段按钮",debug:"启动调试模式"},n={lyriclang:"zh-hans",captionlang:"zh-hans",blockupload:!0,blockimmersive:!0,debug:!1};return b.decodeparams(n,e)}frombinary(e){return e instanceof uint8array?(this.message=this.msgtype.frombinary(e),b.debug(`raw: ${math.floor(e.length/1024)} kb`),this):(b.log("youtube can not get binarybody"),b.exit(),this)}async modify(){let e=this.pure();return e instanceof promise?await e:e}tobinary(){return this.message.tobinary()}listunknownfields(e){return e instanceof e?e.gettype().runtime.bin.listunknownfields(e):[]}save(){if(this.needsave){b.debug("update config");let e={whiteno:this.whiteno,blackno:this.blackno,whiteeml:this.whiteeml,blackeml:this.blackeml};b.setjson(e,"youtubeadvertiseinfo")}}done(){if(this.save(),this.needprocess){b.timestart("tobinary");let e=this.tobinary();b.timeend("tobinary"),b.debug(`modify: ${math.floor(e.length/1024)} kb`),b.done({bodybytes:e})}b.debug("use $done({})"),b.exit()}iterate(e={},n,r){let s=typeof e=="object"?[e]:[];for(;s.length;){let o=s.pop(),i=object.keys(o);if(typeof n=="symbol"){for(let a of object.getownpropertysymbols(o))if(a.description===n.description){r(o,s);break}}for(let a of i)a===n?r(o,s):typeof o[a]=="object"&&s.push(o[a])}}isadvertise(e){let n=this.listunknownfields(e)[0];return n?this.handlefieldno(n):this.handlefieldeml(e)}handlefieldno(e){let n=e.no;if(this.whiteno.includes(n))return!1;if(this.blackno.includes(n))return!0;let s=this.decoder.decode(e.data).includes("pagead");return s?this.blackno.push(n):this.whiteno.push(n),this.needsave=!0,s}handlefieldeml(e){let n=!1,r="";return this.iterate(e,"renderinfo",(s,o)=>{if(r=s.renderinfo.layoutrender.eml.split("|")[0],this.whiteeml.includes(r))n=!1;else if(this.blackeml.includes(r)||/shorts(?!_pivot_item)/.test(r))n=!0;else{let i=s?.videoinfo?.videocontext?.videocontent;if(i){let a=this.listunknownfields(i)[0];n=this.decoder.decode(a.data).includes("pagead"),n?this.blackeml.push(r):this.whiteeml.push(r),this.needsave=!0}}o.length=0}),n}isshorts(e){let n=!1;return this.iterate(e,"eml",(r,s)=>{n=/shorts(?!_pivot_item)/.test(r.eml),s.length=0}),n}};function ir(t){let r=".",s="+-a^+6",o="+-3^+b+-f",i,a,c;for(i=[],a=0,c=0;c<t.length;c++){let f=t.charcodeat(c);128>f?i[a++]=f:(2048>f?i[a++]=f>>6|192:((f&64512)==55296&&c+1<t.length&&(t.charcodeat(c+1)&64512)==56320?(f=65536+((f&1023)<<10)+(t.charcodeat(++c)&1023),i[a++]=f>>18|240,i[a++]=f>>12&63|128):i[a++]=f>>12|224,i[a++]=f>>6&63|128),i[a++]=f&63|128)}for(t=406644,a=0;a<i.length;a++)t+=i[a],t=jt(t,s);return t=jt(t,o),t^=3293161072,0>t&&(t=(t&2147483647)+2147483648),t%=1e6,t.tostring()+r+(t^406644)}function jt(t,e){let n="a",r="+",s;for(let o=0;o<e.length-2;o+=3)s=e.charat(o+2),s=s>=n?s.charcodeat(0)-87:number(s),s=e.charat(o+1)==r?t>>>s:t<<s,t=e.charat(o)==r?t+s&4294967295:t^s;return t}function gt(t,e){return`https://translate.google.com/translate_a/single?client=gtx&sl=auto&tl=${e}&hl=zh-cn&dt=at&dt=bd&dt=ex&dt=ld&dt=md&dt=qca&dt=rw&dt=rm&dt=ss&dt=t&source=bh&ssel=0&tsel=0&kc=1&tk=${ir(t)}&q=${encodeuricomponent(t)}`}var y=class extends v{constructor(e=ft,n="browse"){super(e,n)}async pure(){return this.iterate(this.message,"richgridcontents",e=>{for(let n=e.richgridcontents.length-1;n>=0;n--)this.removecommonad(e,n),this.removeshorts(e,n)}),await this.translate(),this}removecommonad(e,n){let s=e.richgridcontents[n]?.richitemrenderer?.richitemcontent;for(let o=s?.length-1;o>=0;o--)this.isadvertise(s[o])&&(s.splice(o,1),this.needprocess=!0)}removeshorts(e,n){let r=e.richgridcontents[n]?.richsectionrenderer;this.isshorts(r)&&(e.richgridcontents.splice(n,1),this.needprocess=!0)}getbrowseid(){let e="";return this.iterate(this.message?.responsecontext,"key",(n,r)=>{n.key==="browse_id"&&(e=n.value,r.length=0)}),e}async translate(){let e=this.argument.lyriclang?.trim();if(!(this.name==="browse"&&this.getbrowseid().startswith("mplyt"))||e==="off")return;let n="",r,s=!1;if(this.iterate(this.message,"timedlyricscontent",(c,f)=>{r=c.timedlyricscontent,n=c.timedlyricscontent.runs.map(m=>m.text).join(`
`),s=!0,f.length=0}),s||this.iterate(this.message,"description",(c,f)=>{r=c.description.runs[0],n=c.description.runs[0].text,f.length=0,s=!0}),!s)return;let o=e.split("-")[0],i=gt(n,e),a=await b.fetch({method:"get",url:i});if(a.status===200&&a.body){let c=json.parse(a.body),f=" & translated by google",m=c[2].includes(o);r.text?(r.text=c[0].map(l=>m?l[0]:l[1]+l[0]||"").join(`\r
`),this.iterate(this.message,"footer",(l,g)=>{l.footer.runs[0].text+=f,g.length=0})):r.runs.length<=c[0].length&&(r.runs.foreach((l,g)=>{l.text=m?c[0][g][0]:l.text+`
${c[0][g][0]}`}),r.footerlabel+=f),this.needprocess=!0}}},be=class extends y{constructor(e=ct,n="next"){super(e,n)}addtranslatetab(){this.iterate(this.message?.a1f7?.musicplayrender,"items",(e,n)=>{let r=e.items.find(s=>s.tab.info?.browseinfo?.browseid.startswith("mplyt"));r&&(r.tab.name=r.tab.name+"⇄"),this.needprocess=!0,n.length=0})}},ee=class extends v{constructor(e=pe,n="player"){super(e,n)}pure(){return this.message.adplacements?.length&&(this.message.adplacements.length=0),delete this.message?.playbacktracking?.pageadviewthroughconversion,this.addplayability(),this.addtranslatecaption(),this.needprocess=!0,this}addplayability(){let e=this.message?.playabilitystatus?.miniplayer?.miniplayerrender;typeof e=="object"&&(e.active=!0),typeof this.message.playabilitystatus=="object"&&(this.message.playabilitystatus.backgroundplayer=new de({backgroundplayerrender:{active:!0}}))}addtranslatecaption(){let e=this.argument.captionlang;e!=="off"&&this.iterate(this.message,"captiontracks",(n,r)=>{let s=n.captiontracks,o=n.audiotracks;if(array.isarray(s)){let a={[e]:2,en:1},c=-1,f=0;for(let m=0;m<s.length;m++){let l=s[m],g=a[l.languagecode];g&&g>c&&(c=g,f=m),l.istranslatable=!0}if(c!==2){let m=new $e({baseurl:s[f].baseurl+`&tlang=${e}`,name:{runs:[{text:`@enhance (${e})`}]},vssid:`.${e}`,languagecode:e});s.push(m)}if(array.isarray(o)){let m=c===2?f:s.length-1;for(let l of o)l.captiontrackindices?.includes(m)||l.captiontrackindices.push(m),l.defaultcaptiontrackindex=m,l.captionsinitialstate=3}}let i={de:"deutsch",ru:"Русский",fr:"fran\xe7ais",fil:"filipino",ko:"한국어",ja:"日本語",en:"english",vi:"tiếng việt","zh-hant":"中文（繁體）","zh-hans":"中文（简体）",und:"@virgilclyne"};n.translationlanguages=object.entries(i).map(([a,c])=>new ve({languagecode:a,languagename:{runs:[{text:c}]}})),r.length=0})}},ke=class extends y{constructor(e=mt,n="search"){super(e,n)}},te=class extends v{constructor(e=pt,n="shorts"){super(e,n)}pure(){let e=this.message.entries?.length;if(e)for(let n=e-1;n>=0;n--)this.message.entries[n].command?.reelwatchendpoint?.overlay||(this.message.entries.splice(n,1),this.needprocess=!0);return this}},we=class extends v{constructor(e=vt,n="guide"){super(e,n)}pure(){let e=["spunlimited"];return this.argument.blockupload&&e.push("feuploads"),this.argument.blockimmersive&&e.push("femusic_immersive"),this.iterate(this.message,"rendereritems",n=>{for(let r=n.rendereritems.length-1;r>=0;r--){let s=n.rendereritems[r]?.iconrender?.browseid||n.rendereritems[r]?.labelrender?.browseid;e.includes(s)&&(n.rendereritems.splice(r,1),this.needprocess=!0)}}),this}},xe=class extends v{constructor(e=$t,n="setting"){super(e,n)}pure(){this.iterate(this.message,"categoryid",n=>{if(n.categoryid===10005){let r={f1:135,f2:20434,f3:2,timeinfo:this.message.trackingparams.timeinfo},s=new ge({settingbooleanrenderer:{itemid:0,enableserviceendpoint:{trackingparams:r,setclientsettingendpoint:{settingdatas:{clientsettingenum:{item:151},boolvalue:!0}}},disableserviceendpoint:{trackingparams:r,setclientsettingendpoint:{settingdatas:{clientsettingenum:{item:151},boolvalue:!1}}},clicktrackingparams:r}});n.subsettings.push(s)}});let e=new je({settingcategoryentryrenderer:{f2:1,f3:1,trackingparams:{f1:2,f2:20020,f3:8,timeinfo:this.message.trackingparams.timeinfo},f6:0,f7:1,f8:1,f9:1,f10:1,f12:1}});return this.message.settingitems.push(e),this.needprocess=!0,this}},ie=class extends ee{constructor(e=vt,n="watch"){super(e,n)}pure(){let e=this.message;return this.iterate(this.message,"player",(n,r)=>{this.message=n.player,r.length=0}),super.pure(),this.message=e,this}};var ar=new map([["browse",y],["next",be],["player",ee],["search",ke],["reel_watch_sequence",te],["guide",we],["get_setting",xe],["get_watch",ie]]);function qe(t){for(let[e,n]of ar.entries())if(t.includes(e))return new n;return null}async function cr(){let t=qe(b.request.url);if(t){let e=b.response.bodybytes;b.timestart("frombinary"),t.frombinary(e),b.timeend("frombinary"),b.timestart("modify"),await t.modify(),b.timeend("modify"),t.done()}else b.msg("youtube enhance","插件需要更新","你的YouTube去广告插件需要更新到最新版"),b.exit()}cr().catch(t=>{b.log(t.tostring())}).finally(()=>{b.exit()});})();
